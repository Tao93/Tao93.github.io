<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="A blog of Liu Tao"><title>Android 中使用 SVG 简介 | Liu Tao</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Android 中使用 SVG 简介</h1><a id="logo" href="/.">Liu Tao</a><p class="description">A little older, a little wiser, but happy to see you.</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Android 中使用 SVG 简介</h1><div class="post-meta">May 16, 2020</div><a class="disqus-comment-count" data-disqus-identifier="2020/05/16/Android 中使用 SVG 简介/" href="/2020/05/16/Android 中使用 SVG 简介/#disqus_thread"></a><div class="post-content"><h4 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h4><p>可缩放矢量图 (Scalable Vector Graph，以下简称 SVG)，可以大大减小 Android app 中打包的图像资源大小，不用担心图片模糊的问题，很适合用于简单风格或者几何风格的图像。此外在 Android 中，SVG 极大的灵活性，远非其它 drawable 类型（<a href="https://developer.android.com/guide/topics/resources/drawable-resource#Shape" target="_blank" rel="noopener">shape</a>，说的就是你）能比。</p>
<p>事实上不光是 Android，SVG 在 Web 中也应用广泛，维基百科中大量的图表使用了 SVG，来减少网络传输资源的大小。比如维基百科的 <a href="https://en.wikipedia.org/wiki/Android_(operating_system" target="_blank" rel="noopener">Android (operating system)</a>) 中就有一幅 <a href="https://en.wikipedia.org/wiki/File:Android_new_logo_2019.svg" target="_blank" rel="noopener">Android Logo 图片</a> 是 SVG。如果我们下载这个文件，会发现它是一个文本文件：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span> <span class="attr">viewBox</span>=<span class="string">"0 0 866.3 132"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">defs</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined">.a&#123;fill:#3ddc84;&#125;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">defs</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>Android1<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">"M59.3,56.4c12.4,0,22.7,6.4,27.6,13.3V58.1h18.9v86.1H92.2a5.378,5.378,0,0,1-5.4-5.4v-6.2C82,139.6,71.7,146,59.3,146c-23.6,0-41.5-20.2-41.5-44.8S35.7,56.4,59.3,56.4m3.4,17.2C47.4,73.6,37,85.7,37,101.2s10.3,27.6,25.7,27.6c15.3,0,25.7-12.1,25.7-27.6S78.1,73.6,62.7,73.6m64.6-15.5h19V69.8c5.2-8.6,15-13.4,26.2-13.4,20,0,32.9,14.1,32.9,36v51.8H191.8a5.378,5.378,0,0,1-5.4-5.4V95.5c0-13.6-6.9-21.9-17.9-21.9-12.6,0-22.2,9.8-22.2,28.2v42.4H132.7a5.378,5.378,0,0,1-5.4-5.4Zm134.6-1.7c12.4,0,22.7,6.4,27.6,13.3V15.1h18.9V144.3H294.8a5.378,5.378,0,0,1-5.4-5.4v-6.2c-4.8,6.9-15.2,13.3-27.6,13.3-23.6,0-41.5-20.2-41.5-44.8.1-24.6,18-44.8,41.6-44.8m3.4,17.2c-15.3,0-25.7,12.1-25.7,27.6s10.3,27.6,25.7,27.6c15.3,0,25.7-12.1,25.7-27.6s-10.4-27.6-25.7-27.6m64.6-15.5h18.9V73.4a24.26,24.26,0,0,1,22.7-16.2,38.519,38.519,0,0,1,7.4.7V77.4a30.541,30.541,0,0,0-9.5-1.6c-10.9,0-20.7,9.1-20.7,26.4v42H335.1a5.378,5.378,0,0,1-5.4-5.4V58.1ZM430.1,146c-25.5,0-45.1-19.8-45.1-44.8s19.6-44.8,45.1-44.8,45.1,19.8,45.1,44.8S455.6,146,430.1,146m0-17.6c15.2,0,25.8-11.9,25.8-27.2S445.2,74,430.1,74c-15.3,0-26,11.9-26,27.2s10.7,27.2,26,27.2M500,39.3a12.783,12.783,0,0,1-12.7-12.7A12.829,12.829,0,0,1,500,14a12.65,12.65,0,0,1,0,25.3m-9.4,18.8h18.9v86.1H496a5.378,5.378,0,0,1-5.4-5.4V58.1Zm76-1.7c12.4,0,22.7,6.4,27.6,13.3V15.1h18.9V144.3H599.5a5.378,5.378,0,0,1-5.4-5.4v-6.2c-4.8,6.9-15.2,13.3-27.6,13.3-23.6,0-41.5-20.2-41.5-44.8.1-24.6,18-44.8,41.6-44.8m3.5,17.2c-15.3,0-25.7,12.1-25.7,27.6s10.3,27.6,25.7,27.6c15.3,0,25.7-12.1,25.7-27.6s-10.4-27.6-25.7-27.6"</span> <span class="attr">transform</span>=<span class="string">"translate(-17.8 -14)"</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">path</span> <span class="attr">class</span>=<span class="string">"a"</span> <span class="attr">d</span>=<span class="string">"M822.2,111.7a9.6,9.6,0,1,1,9.6-9.6,9.6,9.6,0,0,1-9.6,9.6m-105.7,0a9.6,9.6,0,1,1,9.6-9.6,9.6,9.6,0,0,1-9.6,9.6M825.6,54.1,844.8,21a3.963,3.963,0,1,0-6.9-3.9L818.5,50.6A117.178,117.178,0,0,0,769.4,40a119.152,119.152,0,0,0-49.2,10.5L700.8,17a3.963,3.963,0,0,0-6.9,3.9L713,54a113.107,113.107,0,0,0-58.6,90.4H884.1a112.53,112.53,0,0,0-58.5-90.3"</span> <span class="attr">transform</span>=<span class="string">"translate(-17.8 -14)"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>理论上讲，矢量图就是一个文本文件，里面按确定规则描述了这个图片有哪些几何元素，渲染时按照这些规则把元素一一绘制出来就好了，所以不会有模糊的问题。不过元素越复杂，越不像是几何元素，那么这个文本文件就会越大（因为需要非常多的描述），最后绘制也需要画比较多东西。</p>
<p>理论是很简单，不过要在 Android 中使用矢量图，我们就需要了解一下它的那些规则了。</p>
<h3 id="SVG-文本的结构"><a href="#SVG-文本的结构" class="headerlink" title="SVG 文本的结构"></a>SVG 文本的结构</h3><p>Android 中使用 SVG，我们会创建 drawable XML 文件，里面使用 <code>vector</code> 标签，如下面示例：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">vector</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:width</span>=<span class="string">"64dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:height</span>=<span class="string">"48dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:viewportWidth</span>=<span class="string">"1024"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:viewportHeight</span>=<span class="string">"768"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:pathData</span>=<span class="string">"M0,75l693,693l-693,0z"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:fillColor</span>=<span class="string">"#20FF0000"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:pathData</span>=<span class="string">"M-215,768l1239,0l0,-1239z"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:fillColor</span>=<span class="string">"#20FF0000"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:pathData</span>=<span class="string">"M481,768l543,-543l0,543z"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:fillColor</span>=<span class="string">"#20FF0000"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">vector</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>上面的 vector drawable 预览：</p>
<p><img src="http://tao93.top/images/2020/05/16/1589666952.png" alt=""></p>
<p>可见 Android 用的 vector drawable 似乎和 web 用的 svg 标签格式不一样。的确不同，不过观察一下，它们都有 path 标签，正是一个一个 path 组成了矢量图的内容。而 path 中的 path data 就是一段信息量很大的文本，里面既有数字也有字母和标点。所幸这个 path data 的规则是通用的，属于 W3C 制定的一套标准，在各个平台都一样。</p>
<h4 id="Path-Data"><a href="#Path-Data" class="headerlink" title="Path Data"></a>Path Data</h4><p>Path data 中的字母，被称作命令，一个命令后面跟的 0 个或多个用逗号或空格分隔的数（可以是整数也可以是小数），就是这个命令的参数。这有点像是 Unix 命令。</p>
<p>命令的大小写有不同。大写表示命令后面的参数当做坐标时是绝对坐标，小写时表示参数当做相对坐标（相对于该命令之前，path 已经抵达的位置点）。</p>
<p>最常见命令：</p>
<ul>
<li>M / m 命令表示移动（Move），参数是两个数，组成一对坐标。这个命令通常用来指定 path 的起点。</li>
<li>L / l 命令表示画直线（Line），参数也是两个数，组成一对坐标。这个命令是最简单的指定 path 下一个位置点的方式，即显示指定下一个点的位置，从当前位置画直线过去。</li>
<li>Z / z，画一条直线到起点，结束这个 path，没有参数。</li>
<li>H / h，画一条水平线（Horizontal），参数是一个数，表示水平线的终点的 x 坐标。类似的命令 V / v 表示画竖直线。</li>
</ul>
<p>实例1：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">vector</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:width</span>=<span class="string">"64dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:height</span>=<span class="string">"48dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:viewportWidth</span>=<span class="string">"1024"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:viewportHeight</span>=<span class="string">"768"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:pathData</span>=<span class="string">"M0,0 L300,300 L0,300 z"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:fillColor</span>=<span class="string">"#40FF0000"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">vector</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>实例2：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">vector</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:width</span>=<span class="string">"64dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:height</span>=<span class="string">"48dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:viewportWidth</span>=<span class="string">"1024"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:viewportHeight</span>=<span class="string">"768"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:pathData</span>=<span class="string">"M0,0 L300,300 l-300,0 z"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:fillColor</span>=<span class="string">"#40FF0000"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">vector</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>上面两个实例的效果是一样的，只不过第二个例子用到了小写的 l 命令，所以那个 -300,0 是相对坐标，即相对于 L 命令之后到达位置点的坐标。以上两个例子的预览图：</p>
<p><img src="http://tao93.top/images/2020/05/16/1589667623.png" alt=""></p>
<h4 id="Animated-vector-drawable"><a href="#Animated-vector-drawable" class="headerlink" title="Animated vector drawable"></a>Animated vector drawable</h4><p>Android 中还支持 animated-vector 标签来创建动画矢量图。最常见的做法是，把 vector 的 pathData 当做一个属性，在动画中改变这个属性，从而让矢量图动起来。下面是一个简单的例子：</p>
<p><code>drawable/square.xml</code>，定义有一个正方形的 vector drawable：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">vector</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:width</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:height</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:viewportHeight</span>=<span class="string">"400"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:viewportWidth</span>=<span class="string">"400"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"square_path"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:pathData</span>=<span class="string">"M0,0 l100,0 l0,100, l-100,0 z"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fillColor</span>=<span class="string">"#40FF0000"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">vector</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>animator/square_animator.xml</code>，它的 propertyName 指定了它要更改 target object 的什么属性，valueType 则指明这个 property 是一种 path：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">objectAnimator</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">android:duration</span>=<span class="string">"1000"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:propertyName</span>=<span class="string">"pathData"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:valueType</span>=<span class="string">"pathType"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:valueFrom</span>=<span class="string">"M0,0 l100,0 l0,100, l-100,0 z"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:valueTo</span>=<span class="string">"M0,0 l200,0 l0,200, l-200,0 z"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>drawable/animated_square.xml</code>，drawable 属性指定一个 vector drawable 为目标，而 target 标签中的 name 属性用来指定需要更改目标 vector drawable 中的哪个 path：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">animated-vector</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:drawable</span>=<span class="string">"@drawable/square"</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">target</span> <span class="attr">android:animation</span>=<span class="string">"@animator/square_animator"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"square_path"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">animated-vector</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>AnimatedDrawable 类实现了 Animatable2 接口，所以调用它的 start() 方法，这个 drawable 就能动起来了：</p>
<p><img src="http://tao93.top/images/2020/05/16/1589684164.gif" alt=""></p>
<h4 id="椭圆弧"><a href="#椭圆弧" class="headerlink" title="椭圆弧"></a>椭圆弧</h4><p>有了 L 命令，我们可以画三角形、平行四边形、多边形等等。可以指定我们要画的东西占据 android drawable 的多大空间。接下来记录一下圆弧的简单绘制方式。有了这些，我们就能做许多其它 drawable 类型不能做的事了。</p>
<p>在 web svg 中，圆是很简单的，只需要圆心坐标和半径就可以。但是 Android vector drawable 中更复杂。需要两段圆弧拼成一个圆。不过这个复杂性正好引出了<strong>椭圆弧</strong>的绘制规则，也就是 A / a 命令（elliptical <strong>a</strong>rc）。</p>
<p>A / a 命令有 7 个参数，这 7 个参数依序命令为 rx, ry, x-axis-rotation, large-arc-flag, sweep-flag, x, y.</p>
<ul>
<li>rx 和 ry 表示椭圆的长半轴和短半轴（也就是高中数学里的椭圆方程 <script type="math/tex">\frac{x^2}{a^2} + \frac{y^2}{b^2}  = 1</script> 中的 <script type="math/tex">a</script> 和 <script type="math/tex">b</script>）.</li>
<li>x-axis-rotation 表示椭圆的长轴相对于 x 轴的夹角，单位是弧度单位的 °，负数表示逆时针旋转长半轴，正数表示顺时针旋转。</li>
</ul>
<p>中途解释：</p>
<p>rx 和 rx 确定了椭圆的大小和形状，但没确定位置。当椭圆弧的起点 （path 的当前位置点）和终点（最后两个参数）固定后，大小和形状固定的椭圆需要经过这两个点，但椭圆本身依然可以在这两个点上滑动和翻转（只要翻转后长轴方向没变），所以才需要 x-axis-rotation 参数确定一个角度，从而椭圆不能滑动。</p>
<p>然而，在角度固定时，下图中 1, 2, 3, 4 所指的 4 条弧表明，还是有 4 种情况，这时候就需要参数 large-arc-flag 和 sweep-flag 来四选一了。</p>
<p><img src="http://tao93.top/images/2020/05/16/1589674930.png" alt=""></p>
<ul>
<li>large-arc-flag 这个参数为 0 时表示这个弧度是小角度弧度，为 1 表示大角度弧度。上图中 1 和 3 所指的两条弧为小角度，而 2 和 4 所指为大角度。</li>
<li>sweep-flag 这个参数，为 0 表示逆时针画弧，1 表示顺时针画弧。上图中 1 和 2 是顺时针，而 3 和 4 则是逆时针画弧。</li>
<li>x, y 这两个参数是椭圆弧终点的坐标。</li>
</ul>
<p>有了椭圆弧，就可以拼接两段椭圆弧形成椭圆，而圆只是特殊的椭圆。下面是一个椭圆的例子。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">vector</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:width</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:height</span>=<span class="string">"10dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:viewportHeight</span>=<span class="string">"400"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:viewportWidth</span>=<span class="string">"400"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:name</span>=<span class="string">"square_path"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:pathData</span>=<span class="string">"M0,200 A100,60 0 0 1 400,200 </span></span></span><br><span class="line"><span class="tag"><span class="string">        M0,200 A100,60 0 0 0 400,200 z"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fillColor</span>=<span class="string">"#40FF0000"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">vector</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>上面实例中，两段椭圆弧，都是从 (0, 200) 到 (400, 200)，唯一不同点是，其中一段顺时针，另一段逆时针，从而正好构成一个椭圆：</p>
<p><img src="http://tao93.top/images/2020/05/16/1589686316.png" alt=""></p>
<h3 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h3><p>给公司 app 的桌面图标做的 vector drawable，其中的 clip path 使得只有这个区域范围内的东西才会显示出来，从而达成一个远交矩阵的效果：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">vector</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:width</span>=<span class="string">"27dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:height</span>=<span class="string">"27dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:viewportWidth</span>=<span class="string">"248"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:viewportHeight</span>=<span class="string">"248"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- clip path which is the big round corner rectangle, thus only inside this area of other parts would be shown --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">clip-path</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:pathData</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">            M0,42 a42,42 0 0 1 42,-42 h164</span></span></span><br><span class="line"><span class="tag"><span class="string">            a42,42 0 0 1 42 42 v164</span></span></span><br><span class="line"><span class="tag"><span class="string">            a42,42, 0 0 1 -42 42 h-164</span></span></span><br><span class="line"><span class="tag"><span class="string">            a42,42, 0 0 1 -42 -42 z"</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- the blue background of the whole icon --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span> <span class="attr">android:fillColor</span>=<span class="string">"@color/dossier_icon_bg"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:pathData</span>=<span class="string">"M0,0 h248 v248 h-248 z"</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- the left rectangle of the center part. </span></span><br><span class="line"><span class="comment">    the path data consists of outer clock-wise rect, and 2 inner anti-clock-wise rect. --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fillColor</span>=<span class="string">"@color/white"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:pathData</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">            M62,54 l2,-2 h32 l2,2 v121 l-2,2 h-32 l-2,-2 v-121</span></span></span><br><span class="line"><span class="tag"><span class="string">            m7,20 v6 l1,1 h19 l1,-1 v-6, l-1,-1 h-19 l-1,1</span></span></span><br><span class="line"><span class="tag"><span class="string">            m0,14 v6 l1,1 h19 l1,-1 v-6, l-1,-1 h-19 l-1,1 z"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- upper part of the middle column of the center part --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fillColor</span>=<span class="string">"@color/white"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:pathData</span>=<span class="string">"M112,95 l2,-2 h24 l2,2 v12 h-28 z"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- middle part of the middle column of the center part --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fillColor</span>=<span class="string">"@color/white"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:pathData</span>=<span class="string">"M112,115 h28 v42 h-28 z"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- bottom part of the middle column of the center part --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:fillColor</span>=<span class="string">"@color/white"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:pathData</span>=<span class="string">"M112,163 h28 v12 l-2,2 h-24 l-2,-2 z"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- the right rectangle of the center part. </span></span><br><span class="line"><span class="comment">    the path data consists of outer clock-wise rect, and 2 inner anti-clock-wise rect. --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span> <span class="attr">android:fillColor</span>=<span class="string">"@color/white"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:pathData</span>=<span class="string">"</span></span></span><br><span class="line"><span class="tag"><span class="string">            M154,67 l2,-2 h32 l2,2 v108 l-2,2 h-32 l-2,-2 v-108</span></span></span><br><span class="line"><span class="tag"><span class="string">            m7,40 v6 l1,1 h19 l1,-1 v-6, l-1,-1 h-19 l-1,1</span></span></span><br><span class="line"><span class="tag"><span class="string">            m0,14 v6 l1,1 h19 l1,-1 v-6, l-1,-1 h-19 l-1,1 z"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- the bottom white line of the center part --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span> <span class="attr">android:fillColor</span>=<span class="string">"@color/white"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:pathData</span>=<span class="string">"M48,183 l1,-1 h154 l1,1 v6 l-1,1 h-154 l-1,-1 z"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- the red area shape --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span> <span class="attr">android:fillColor</span>=<span class="string">"#d9242e"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:pathData</span>=<span class="string">"M0,160 h44 a44,44 0 0 1 44,44 v44 h-88 z"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- the 3 small columns above the red area --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span> <span class="attr">android:fillColor</span>=<span class="string">"@color/white"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:pathData</span>=<span class="string">"M20, 180 h11 v40 h-11 z"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span> <span class="attr">android:fillColor</span>=<span class="string">"@color/white"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:pathData</span>=<span class="string">"M39, 180 h11 v40 h-11 z"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span> <span class="attr">android:fillColor</span>=<span class="string">"@color/white"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:pathData</span>=<span class="string">"M58, 180 l11,11 v29 h-11 z"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">vector</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>上面的 vector drawable 的效果就是<a href="https://play.google.com/store/apps/details?id=com.microstrategy.android.dossier" target="_blank" rel="noopener">这个 app</a> 的图标了（当然，是带圆角的）。</p>
<h4 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h4><p>除了使用 fill color 来填充 path 内部，还可以用 stroke color 和其它属性来控制笔画的颜色和样式。矢量图规则是非常庞大和复杂的。可以参考 Android 开发文档，或者是 <a href="https://www.w3.org/TR/SVG/" target="_blank" rel="noopener">W3C 的文档</a>。</p>
<p>矢量图在 Android 中的应用已经相当广泛了，只需扫一眼 Google 系列的各个 app，就会发现它们的图标都是扁平化的几何风格，如果解压 apk 再去看 app 桌面图标资源文件，就能确定他们的确用的是矢量图。乔布斯之后，扁平化风格大行其道，这可能也是矢量图的一阵春风吧。</p>
<h4 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h4><p><a href="https://stackoverflow.com/questions/44948396/convert-vectordrawable-to-svg" target="_blank" rel="noopener">Convert VectorDrawable to SVG</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/SVG" target="_blank" rel="noopener">SVG | MDN</a></p>
<p><a href="https://caster.io/courses/android-vector-drawables-fundamentals" target="_blank" rel="noopener">Android Vector Drawables Fundamentals</a></p>
<p><a href="https://www.w3.org/TR/SVG/" target="_blank" rel="noopener">Scalable Vector Graphics (SVG) 2</a></p>
</div><div class="tags"><a href="/tags/Android/">Android</a></div><div class="post-nav"><a class="next" href="/2020/03/30/Secure communication basics/">Network security basics</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">阅读评论（请确保 Disqus 可以正常加载）</button></div><script type="text/javascript">var disqus_config = function () {
    this.page.url = 'https://tao93.top/2020/05/16/Android 中使用 SVG 简介/';
    this.page.identifier = '2020/05/16/Android 中使用 SVG 简介/';
    this.page.title = 'Android 中使用 SVG 简介';
  };</script><script type="text/javascript" id="disqus-lazy-load-script">$.ajax({
url: 'https://disqus.com/next/config.json',
timeout: 2500,
type: 'GET',
success: function(){
  var d = document;
  var s = d.createElement('script');
  s.src = '//liu-tao.disqus.com/embed.js';
  s.setAttribute('data-timestamp', + new Date());
  (d.head || d.body).appendChild(s);
  $('.disqus_click_btn').css('display', 'none');
},
error: function() {
  $('.disqus_click_btn').css('display', 'block');
}
});</script><script type="text/javascript" id="disqus-click-load">$('.btn_click_load').click(() => {  //click to load comments
    (() => { // DON'T EDIT BELOW THIS LINE
        var d = document;
        var s = d.createElement('script');
        s.src = '//liu-tao.disqus.com/embed.js';
        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
    })();
    $('.disqus_click_btn').css('display','none');
});</script><script type="text/javascript" id="disqus-count-script">$(function() {
     var xhr = new XMLHttpRequest();
     xhr.open('GET', '//disqus.com/next/config.json', true);
     xhr.timeout = 2500;
     xhr.onreadystatechange = function () {
       if (xhr.readyState === 4 && xhr.status === 200) {
         $('.post-meta .post-comments-count').show();
         var s = document.createElement('script');
         s.id = 'dsq-count-scr';
         s.src = 'https://liu-tao.disqus.com/count.js';
         s.async = true;
         (document.head || document.body).appendChild(s);
       }
     };
     xhr.ontimeout = function () { xhr.abort(); };
     xhr.send(null);
   });
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/Algorithm/" style="font-size: 15px;">Algorithm</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/Shell/" style="font-size: 15px;">Shell</a> <a href="/tags/macOS/" style="font-size: 15px;">macOS</a> <a href="/tags/MySQL/" style="font-size: 15px;">MySQL</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/AOSP/" style="font-size: 15px;">AOSP</a> <a href="/tags/swift/" style="font-size: 15px;">swift</a> <a href="/tags/Other/" style="font-size: 15px;">Other</a> <a href="/tags/Bash/" style="font-size: 15px;">Bash</a> <a href="/tags/ShadowSocks/" style="font-size: 15px;">ShadowSocks</a> <a href="/tags/Homebrew/" style="font-size: 15px;">Homebrew</a> <a href="/tags/adb/" style="font-size: 15px;">adb</a> <a href="/tags/VPS/" style="font-size: 15px;">VPS</a> <a href="/tags/Firmware/" style="font-size: 15px;">Firmware</a> <a href="/tags/Samsung/" style="font-size: 15px;">Samsung</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/GSI/" style="font-size: 15px;">GSI</a> <a href="/tags/Project-Treble/" style="font-size: 15px;">Project Treble</a> <a href="/tags/Hexo-Blog/" style="font-size: 15px;">Hexo Blog</a> <a href="/tags/Kotlin/" style="font-size: 15px;">Kotlin</a> <a href="/tags/Math/" style="font-size: 15px;">Math</a> <a href="/tags/Cryptography/" style="font-size: 15px;">Cryptography</a> <a href="/tags/TLS/" style="font-size: 15px;">TLS</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/05/16/Android 中使用 SVG 简介/">Android 中使用 SVG 简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/03/30/Secure communication basics/">Network security basics</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/01/04/Elliptic curve group/">Elliptic curve cryptography basics</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/04/Kotlin Summary/">Kotlin Summary</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/09/macOS 效率/">5 分钟提高 macOS 使用效率</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/10/Flash stock firmware in SM-T830/">给三星 tablet SM-T830 刷机</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/05/再次将 hexo blog 放置到 Github Pages/">再次将 hexo blog 放置到 Github Pages</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/04/07/Android 自定义简易 PickerView/">Android 自定义简易 PickerView</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/18/一个不一样的 ANR/">一个不一样的 ANR</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/12/Android 绘制圆形图片/">Android 绘制圆形图片</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Recent Comments</i></div><script type="text/javascript" src="//liu-tao.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="https://zxshamson.github.io/" title="Xingshan Zeng (曾幸山)" target="_blank">Xingshan Zeng (曾幸山)</a><ul></ul><a href="https://shikaiwi.github.io/" title="ShiKaiWi" target="_blank">ShiKaiWi</a><ul></ul><a href="http://jairo.top/" title="Jairo" target="_blank">Jairo</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">Liu Tao.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
  });
</script><script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML" async></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>